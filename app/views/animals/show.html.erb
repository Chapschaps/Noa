<%= render 'shared/flashes' %>

<% if @animal.photo.attached? %>
  <div class="banner-animal-show" style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url('<%= cl_image_path @animal.photo.key%>'); background-position: inherit;"></div>
 <% else %>
 <div class="banner-animal-show" style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url('<%= image_path "test.jpg"%>'); background-position: inherit;"></div>
<% end %>

<div class="container">
  <div class="title-show-animal">
    <h1><%= "#{@animal.name}, #{@animal.specie}" %></h1>
  </div>

  <div class="card">
    <div class="card-body">
      <%= @animal.description %>
    </div>
  </div>

  <div class="row">
    <div class="d-flex justify-content-between">
       <div class="description-map col-8 shadow-none p-3 mb-5 bg-light rounded">
          <div class="card-description-show">
            <br />
            <h3> <i class="fas fa-venus-mars"></i> Sexe : <%= @animal.sexe %> </h3>
            <h3> <i class="fas fa-arrows-alt-v"></i> Size : <%= @animal.size %> </h3>
            <h3> <i class="fas fa-universal-access"></i> Age : <%= @animal.age %> </h3>
            <h3> <i class="fas fa-exclamation-triangle"></i> Risk factor :
              <% if @animal.risk_factor == "XXX" %>
                <i style="color:red;"><strong>High</strong></p>
              <% elsif @animal.risk_factor =="XX" %>
                <i style="color:blue;"><strong>Normal</strong></p>
              <% elsif @animal.risk_factor =="X" %>
                <i style="color:green;"><strong>Low</strong></p>
              <% end %>
            </h3>
            <h3> <i class="fas fa-search-location"></i> Location : <%= @animal.location %> </h3>
          </div>

  <!-- MAP -->



          <div
            id="map"
            class="map-show";
            style="width: 100%;
            height: 300px;"
            data-markers="<%= @markers.to_json %>"
            data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
          ></div>
      </div>

      <div class="search-form align-items-center" id="show-search-form">
        <h2><i class="far fa-calendar-alt"></i>  Add dates</h2>
        <br>
        <%= form_tag animal_confirmation_path(@animal), method: :get do %>
          <div class="dates-inputs">
            <div class="form-group form-date">
              <%= label_tag(:starting_date, "Start Date") %>
              <%= date_field_tag :starting_date, id:'start' %>
            </div>
            <div class="form-group form-date">
              <%= label_tag(:starting_date, "Start Date") %>
              <%= date_field_tag :ending_date, id:'end' %>
            </div>
          </div>
          <br>
          <%= submit_tag "Choose this pet", class: "btn btn-primary mt-20" %>
        <% end %>
      </div>
    </div>
  </div>

  <h2>More animals you may like</h2>
  <br>

  <div class="cards container" style="margin-bottom:100px;">
    <% @animals.each do |animal| %>
      <% if @animal != animal %>
        <div class="card-animal">
          <%= link_to animal_path(animal) do %>
            <% if animal.photo.attached? %>
              <%= cl_image_tag animal.photo.key, height: 200, width: 400, crop: :fill%>
            <% else %>
              <%= image_tag "test.jpg", height: 200, width: 400, crop: :fill %>
            <% end %>
          <% end %>
          <div class="card-animal-infos">
            <div>
              <h2><%= link_to animal.name, animal_path(animal) %></h2>
              <p>    <%= animal.specie %> <%= animal.location %></p>
            </div>
            <h2 class="card-animal-pricing"> <%= "#{animal.price}$/per day" %></h2>
            <%= cl_image_tag animal.user.photo.key, height: 40, width: 40, crop: :fill, class: "card-animal-user avatar-bordered"  %>
           </div>
        </div>
      <% end %>
    <% end %>
  </div>
</div>

